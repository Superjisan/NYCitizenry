{% extends 'layouts/default.html' %}
{% block content %}
    <div class="container-full">

      <div class="row">

        <div class="col-lg-12 text-center v-center">

          <h1>NYCitizenry</h1>
          <p class="lead">Know Your Representatives!</p>

          <br><br><br>

          <form class="col-lg-12">
            <div class="input-group" style="width:340px;text-align:center;margin:0 auto;">
            <input class="form-control input-md" title="Don't worry. Your address data won't be stored anywhere in our database" placeholder="Enter your address" type="text" id="address" value="Geocode" >
              <span class="input-group-btn">
                <a href="#mapModal" class="btn btn-md btn-primary" type="button" data-toggle="modal" data-target="#mapModal" onclick="codeAddress()">Get My Address</a></span>
            </div>
          </form>
        </div>
              <div class="modal fade" id="mapModal" tabindex="-1" role="dialog" aria-labelledby="mapModalLabel" aria-hidden="true" >
                  <br>
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h2 class="modal-title" id="myModalLabel">New Product Announcement</h2>
                      </div>
                      <div class="modal-body">
                        <div id="map-canvas"></div>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>

                      </div>
                    </div>
                  </div>
                </div>
      </div> <!-- /row -->

      <div class="row">

        <div class="col-lg-12 text-center v-center" style="font-size:39pt;">
          <a href="#"><i class="icon-google-plus"></i></a> <a href="#"><i class="icon-facebook"></i></a>  <a href="#"><i class="icon-twitter"></i></a> <a href="#"><i class="icon-github"></i></a> <a href="#"><i class="icon-pinterest"></i></a>
        </div>

      </div>

    <br><br><br><br><br>

</div> <!-- /container full -->
    <section data-ui-view ></section>

{% endblock %}

{% block bottomscript %}
  <script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>
  <script type="text/javascript">
        window.user = {{user|json|safe}};
        window.modules = {{modules|json|safe}};
  </script>
  <script type="text/javascript">
    var map, geocoder;

    function initialize() {
      var mapOptions = {
        zoom: 11,
        center: new google.maps.LatLng(40.78013, -73.79871),
        mapTypeId: google.maps.MapTypeId.ROADMAP
      };


       map = new google.maps.Map(document.getElementById('map-canvas'),
          mapOptions);


      geocoder = new google.maps.Geocoder()

    }

    google.maps.event.addDomListener(window, 'load', initialize);

    function codeAddress() {
      var address = document.getElementById('address').value;
      geocoder.geocode( { 'address': address}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
          map.setCenter(results[0].geometry.location);
          var marker = new google.maps.Marker({
              map: map,
              position: results[0].geometry.location
          });
        } else {
          alert('Geocode was not successful for the following reason: ' + status);
        }
      });
    }

  </script>
{% endblock %}
